(this.webpackJsonpemphasoft=this.webpackJsonpemphasoft||[]).push([[0],{140:function(e,t,r){e.exports=r(267)},145:function(e,t,r){},146:function(e,t,r){},228:function(e,t,r){},267:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),s=r(51),u=r.n(s),o=(r(145),r(146),r(14)),c=r(7),i=r(25),l=r.n(i),m=r(40),d=r(19),f=r(111).create({baseURL:"https://emphasoft-test-assignment.herokuapp.com/",headers:{"Content-type":"application/json"}}),p=function(e,t){var r={username:e,password:t};return f.post("/api-token-auth/",r).then((function(e){return f.defaults.headers.common.Authorization="Token ".concat(e.data.token),!0})).catch((function(e){return!1}))},h=function(e){return f.post("/api/v1/users/",{username:e.userName,first_name:e.firstName,last_name:e.lastName,is_active:e.isActive,password:e.password}).then((function(e){return{resultCode:0,data:e.data}})).catch((function(e){return{resultCode:1,data:e.response.data}}))},E=function(e){return f.put("/api/v1/users/".concat(e.userId,"/"),{username:e.userName,first_name:e.firstName,last_name:e.lastName,is_active:e.isActive,password:e.password}).then((function(e){return{resultCode:0,data:e.data}})).catch((function(e){return console.log(e.response),{resultCode:1,data:e.response.data}}))},v=r(20),N="emphasoft-test/auth/SET_AUTH_DATA",b={userName:"",isAuth:!1},w=function(e){return{type:N,userName:e}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object(d.a)(Object(d.a)({},e),{},{userName:t.userName,isAuth:!0});default:return e}},j=r(112),O=r(109),A="emphasoft-test/user/SET_USER_DATA",U="emphasoft-test/user/SET_EDIT_MODE",y={userId:null,userName:"",firstName:"",lastName:"",password:"",isActive:!0,editMode:!1},_=function(e){return{type:A,userData:e}},x=function(e){return{type:U,value:e}},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return Object(d.a)(Object(d.a)({},e),t.userData);case U:return Object(d.a)(Object(d.a)({},e),{},{editMode:t.value});default:return e}},I=Object(c.c)({auth:g,user:C,form:O.a}),F=Object(c.e)(I,Object(c.a)(j.a)),S=r(53),k=r(8),M=r(107),T=r(108),D=function(e){if(!e)return"Field is required"},L=function(e){return function(t){if(t&&t.length>e)return"Max length is ".concat(e," symbols!")}},B=L(150),P=L(128),z=L(30),$=function(e){if(!/^[\w.@+-]+$/.test(e))return"Illegal character. Letters, digits and @/./+/-/_ only!"},G=function(e){if(!/^(?=.*[A-Z])(?=.*\d).{8,}$/.test(e))return"Password should be 8+ characters, 1 capital, 1 numeric"},J=r(114),R=(r(228),function(e){var t=e.input,r=e.meta,a=Object(J.a)(e,["input","meta"]),s="Form-Input"+(r.touched&&r.error?" FormError-Input":"");return n.a.createElement(n.a.Fragment,null,n.a.createElement("input",Object.assign({},t,a,{className:s})),r.touched&&r.error&&n.a.createElement("div",{className:"FormError-Text"},r.error))}),W=Object(T.a)({form:"login"})((function(e){return n.a.createElement("form",{className:"Form",onSubmit:e.handleSubmit},n.a.createElement("div",null,n.a.createElement(M.a,{placeholder:"Login",name:"login",type:"text",component:R,validate:[D]})),n.a.createElement("div",null,n.a.createElement(M.a,{placeholder:"Password",name:"password",type:"password",component:R,validate:[D]})),e.error&&n.a.createElement("div",{className:"FormError-GlobalError"},e.error),n.a.createElement("div",null,n.a.createElement("button",{className:"Form-Button"},"submit")))})),q=Object(o.b)((function(e){return{isAuth:e.auth.isAuth}}),{authorizeUser:function(e,t){return function(){var r=Object(m.a)(l.a.mark((function r(a){var n;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,p(e,t);case 2:n=r.sent,a(n?w(e):Object(v.a)("login",{_error:"Incorrect login or password!"}));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}})((function(e){return e.isAuth?n.a.createElement(k.a,{to:"/user"}):n.a.createElement("div",null,n.a.createElement("h1",null,"Login"),n.a.createElement(W,{onSubmit:function(t){e.authorizeUser(t.login,t.password)}}),n.a.createElement("p",null,"Username: test_super"),n.a.createElement("p",null,"Password: ","Nf<U4f<rDbtDxAPn"))})),H=function(e){return null!==e.user.userId},V=function(e){return e.user.userId},Z=function(e){return e.user.userName},K=function(e){return e.user.firstName},Q=function(e){return e.user.lastName},X=function(e){return e.user.editMode},Y=Object(c.d)(Object(o.b)((function(e){return{initialValues:e.user}}),{}),Object(T.a)({form:"user"}))((function(e){return n.a.createElement("form",{onSubmit:e.handleSubmit},n.a.createElement("div",null,n.a.createElement(M.a,{placeholder:"Username",name:"userName",type:"text",component:R,validate:[D,$,B]})),n.a.createElement("div",null,n.a.createElement(M.a,{placeholder:"First Name",name:"firstName",type:"text",component:R,validate:[z]})),n.a.createElement("div",null,n.a.createElement(M.a,{placeholder:"Last Name",name:"lastName",type:"text",component:R,validate:[B]})),n.a.createElement("div",null,n.a.createElement(M.a,{placeholder:"Password",name:"password",type:"password",component:R,validate:[D,P,G]})),e.error&&n.a.createElement("div",{className:"FormError-GlobalError"},e.error),n.a.createElement("div",null,n.a.createElement("button",{className:"Form-Button"},"Save changes")))})),ee=function(e){return e.auth.isAuth},te=Object(o.b)((function(e){return{isAuth:ee(e),isUserCreated:H(e),userId:V(e),userName:Z(e),firstName:K(e),lastName:Q(e),editMode:X(e)}}),{changeUser:function(e,t,r,a,n){return function(){var s=Object(m.a)(l.a.mark((function s(u){var o;return l.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return o={isActive:!0,userId:e,userName:t,firstName:r,lastName:a,password:n},s.next=3,E(o);case 3:0===s.sent.resultCode?(u(_(o)),u(x(!1))):u(Object(v.a)("user",{_error:"Some server error"}));case 5:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()},createUser:function(e,t,r,a){return function(){var n=Object(m.a)(l.a.mark((function n(s){var u,o;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u={isActive:!0,userName:e,firstName:t,lastName:r,password:a},n.next=3,h(u);case 3:0===(o=n.sent).resultCode?(s(_(Object(d.a)(Object(d.a)({},u),{},{userId:o.data.id}))),s(x(!1))):o.data.username?s(Object(v.a)("user",{userName:o.data.username})):s(Object(v.a)("user",{_error:"Some server error"}));case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},setEditMode:x})((function(e){return e.isAuth?n.a.createElement("div",{className:"User"},n.a.createElement("h1",null,"User"),!e.editMode&&n.a.createElement("div",null,e.isUserCreated&&n.a.createElement("div",null,n.a.createElement("p",null,"username: ",e.userName),n.a.createElement("p",null,"First name: ",e.firstName),n.a.createElement("p",null,"Last name: ",e.lastName)),n.a.createElement("button",{className:"Form-Button",onClick:function(){return e.setEditMode(!0)}},e.isUserCreated?"Change User":"Create User")),e.editMode&&n.a.createElement(Y,{onSubmit:function(t){e.isUserCreated?e.changeUser(e.userId,t.userName,t.firstName,t.lastName,t.password):e.createUser(t.userName,t.firstName,t.lastName,t.password)}})):n.a.createElement(k.a,{to:"/login"})}));var re=function(){return n.a.createElement(S.a,null,n.a.createElement(o.a,{store:F},n.a.createElement("div",{className:"App"},n.a.createElement("div",{className:"Container"},n.a.createElement(k.d,null,n.a.createElement(k.a,{exact:!0,from:"/",to:"/login"}),n.a.createElement(k.b,{path:"/login",render:function(){return n.a.createElement(q,null)}}),n.a.createElement(k.b,{path:"/user",render:function(){return n.a.createElement(te,null)}}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(n.a.createElement(re,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[140,1,2]]]);
//# sourceMappingURL=main.c15c3063.chunk.js.map